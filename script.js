function parseNum(t) { return parseFloat(t.replace(/[^0-9.\-]/g, "")) || 0 } function fmtM(t) { return Math.abs(t) < .001 ? "$0.00M" : (t < 0 ? "-" : "") + "$" + Math.abs(t).toFixed(3) + "M" } function fmtDollar(t) { return 1e6 <= Math.abs(t) ? (t < 0 ? "-" : "") + "$" + (Math.abs(t) / 1e6).toFixed(2) + "M" : (t < 0 ? "-" : "") + "$" + Math.abs(Math.round(t)).toLocaleString("en-US") } function fmtPct(t) { return (100 * t).toFixed(2) + "%" } function fmtK(t) { return Math.round(t).toLocaleString("en-US") } function fmtRoi(t) { return (100 * t).toFixed(0) + "%" } function calculate() { var t = parseNum(document.getElementById("annualGMV").value), e = parseNum(document.getElementById("sessions").value), n = parseFloat(document.getElementById("convRate").value) / 100 || 0, o = parseNum(document.getElementById("aov").value), m = parseFloat(document.getElementById("opMargin").value) / 100 || 0, d = parseFloat(document.getElementById("processingRate").value) / 100 || 0, l = parseInt(document.getElementById("shopPayPct").value) / 100, u = parseInt(document.getElementById("convUplift").value) / 100, a = parseInt(document.getElementById("aovUplift").value) / 100, c = parseNum(document.getElementById("implCost").value), r = (parseFloat(document.getElementById("implMonths").value) || 0) / 4.333; document.getElementById("shopPayPctVal").textContent = Math.round(100 * l) + "%", document.getElementById("convUpliftVal").textContent = Math.round(100 * u) + "%", document.getElementById("aovUpliftVal").textContent = Math.round(100 * a) + "%"; var i = .034 * (l * t) + .3 * (0 < o ? t / o * l : 0), B = i - d * t * l, g = n * (1 + u), y = 12 * e * (g - n), I = o * (1 + a), C = y * I, f = C * m, E = f / 1e6, x = E * Math.max(0, (12 - r) / 12), s = E, M = E, p = x + s + M, v = -B / 1e6, Y = -c / 1e6, h = v + Y, F = v, N = v, R = x + h, D = s + F, S = M + N, P = R, T = P + D, b = T + S, d = h + F, t = d + N, l = 0 != h ? -R / h : 0, u = 0 != F ? -D / F : 0, e = 0 != N ? -S / N : 0, a = 0 != h ? -P / h : 0, m = 0 != d ? -T / d : 0, r = 0 != t ? -b / t : 0; let A = 0, U = 0, V = 0; 0 < x && (A = 0 < P ? -h / x * 12 : 12), P < 0 && 0 < T ? U = -P / D * 12 : T < 0 && (U = 12), T < 0 && 0 < b ? V = -T / S * 12 : b < 0 && (V = 12); const $ = A + U + V; v = R / 1.1 + D / (1.1 * 1.1) + S / (1.1 * 1.1 * 1.1), d = -t, t = b; const K = 0 < d ? t / d : 0; document.getElementById("heroRevenue").textContent = fmtDollar(C), document.getElementById("heroMargin").textContent = "Margin impact: " + fmtDollar(f), document.getElementById("dispConvToday").textContent = (100 * n).toFixed(2) + "%", document.getElementById("dispConvFuture").textContent = (100 * g).toFixed(2) + "%", document.getElementById("dispNewCust").textContent = fmtK(y), document.getElementById("dispAovToday").textContent = fmtDollar(o), document.getElementById("dispAovFuture").textContent = fmtDollar(I), document.getElementById("dispSpccPricing").textContent = fmtDollar(i) + "/yr", document.getElementById("dispCostDiff").textContent = fmtDollar(B) + "/yr", document.getElementById("dispMarginImpact").textContent = fmtDollar(f) + "/yr", document.getElementById("roiBenSS").textContent = fmtM(E), document.getElementById("roiBenY1").textContent = fmtM(x), document.getElementById("roiBenY2").textContent = fmtM(s), document.getElementById("roiBenY3").textContent = fmtM(M), document.getElementById("roiBenTotal").textContent = fmtM(p), document.getElementById("roiBenTotalSS").textContent = fmtM(E), document.getElementById("roiBenTotalY1").textContent = fmtM(x), document.getElementById("roiBenTotalY2").textContent = fmtM(s), document.getElementById("roiBenTotalY3").textContent = fmtM(M), document.getElementById("roiBenTotalAll").textContent = fmtM(p), document.getElementById("roiImplY1").textContent = 0 < c ? fmtM(Y) : "$0.00M", document.getElementById("roiCostY1").textContent = fmtM(h), document.getElementById("roiCostY2").textContent = fmtM(F), document.getElementById("roiCostY3").textContent = fmtM(N), document.getElementById("roiNetY1").textContent = fmtM(R), document.getElementById("roiNetY2").textContent = fmtM(D), document.getElementById("roiNetY3").textContent = fmtM(S), document.getElementById("roiCumNetY1").textContent = fmtM(P), document.getElementById("roiCumNetY2").textContent = fmtM(T), document.getElementById("roiCumNetY3").textContent = fmtM(b), document.getElementById("roiAnnY1").textContent = fmtRoi(l), document.getElementById("roiAnnY2").textContent = fmtRoi(u), document.getElementById("roiAnnY3").textContent = fmtRoi(e), document.getElementById("roiCumY1").textContent = fmtRoi(a), document.getElementById("roiCumY2").textContent = fmtRoi(m), document.getElementById("roiCumY3").textContent = fmtRoi(r), document.getElementById("sum3yrROI").textContent = K.toFixed(1) + "x", document.getElementById("sumNPV").textContent = fmtM(v), document.getElementById("sumNetBen").textContent = fmtM(t), document.getElementById("sumPayback").textContent = 0 < $ ? $.toFixed(1) + " mo" : "â€”" } calculate();